>
> **Note: The Workload Services Framework is a benchmarking framework and is not intended to be used for the deployment of workloads in production environments. It is recommended that users consider any adjustments which may be necessary for the deployment of these workloads in a production environment including those necessary for implementing software best practices for workload scalability and security.**
>
### Introduction

This is a 3d human pose estimation pipeline with an object detection,
2d human pose estimator and 3d human pose estimator components.
This pipeline takes video as input to identify human body.
Then human pose estimator predict the human pose in 2d and 3d space.

### Test Case

The test cases are based on one 1080p video file with 1165 frames.

The 3d human pose estimation Workload provides following test cases:

- latency_cpu_pytorch
- latency_cpu_openvino
- latency_gated
- latency_pkm

We expose parameters like `INFERENCE_FRAMEWORK` as the framework used for inference,
of which value could be `torch` or `openvino`.
`INFERENCE_DEVICE` specify the device used for inference, at current time only `cpu` is supported.
`INPUT_VIDEO` specify the video used for input.

Use the following commands to show the list of test cases:

```
cd build
cmake -DPLATFORM=SPR -DREGISTRY= -DBENCHMARK=3DHuman-Pose-Estimation ..
cd workload/3DHuman-Pose-Estimation
./ctest.sh -N
```

### Docker Image

The workload contains a single docker image: `3dhuman-pose-estimation`,
which is built by the following command:

```
make
```

```
mkdir -p logs-3dhuman
id=$(docker run --detach --rm --privileged -e INFERENCE_FRAMEWORK=openvino -e INFERENCE_DEVICE=cpu 3dhuman-pose-estimation:latest)
docker exec $id cat /export-logs | tar xf - -C logs-3dhuman
docker rm -f $id
```

### KPI

Run the [`kpi.sh`](kpi.sh) script to generate the KPIs. For example, if we want to see the kpi generated by the target
testcase `test_3dhuman_pose_estimation_latency_cpu_pytorch`, we can use the following commands:

```
cd logs-3dhuman_pose_estimation_latency_cpu_pytorch
bash kpi.sh
```

The following KPI are generated:

- **`average fps `: Average fps of running pipeline.
- **`average latency `: Average latency of processing one frame in pipeline.


### Index Info

- Name: `3D Human Pose Estimation`
- Category: `Edge`
- Platform: `ICX`, `SPR`
- Keywords: `YOLO`, `HRNet`, `HMR`
